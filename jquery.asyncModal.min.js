/* asyncModal v1.0 by Ian Beck - https://github.com/onecrayon/jquery.asyncModal */
(function(a){a.fn.extend({asyncModal:function(d){var b={overlay:{color:"#000",opacity:0.4},top:0,fadeDuration:200,modal:'<div id="async-modal"><a class="async-modal__close-button" data-modal-close>X</a><div id="async-modal__content" data-modal-content></div></div>'};d=a.extend(true,b,d);var c=a('<div id="async-modal-overlay"></div>');c.css({display:"none",position:"fixed",top:0,left:0,width:"100%",height:"100%","z-index":100,"background-color":d.overlay.color});a(document.body).append(c);var h=a(d.modal);h.css({display:"none",position:"fixed",left:"50%",top:(d.top===0?"auto":d.top),"z-index":11000,"box-sizing":"border-box","max-height":(a(document.body).height()-20)+"px","max-width":(a(document.body).width()-20)+"px",overflow:"auto"});a(document.body).append(h);return this.each(function(){a(this).click(function(k){k.preventDefault();var i=a(this).attr("href"),j=this;if(i.substr(0,1)==="#"){var l=a(i).clone(true);e(l,j)}else{a.ajax(i,{success:function(n){var m=a("<div>").append(a.parseHTML(n)),o=i.replace(/^.+?(#[\w-]+)$/i,"$1");if(o!==i&&m.find(o).length>0){m=m.find(o)}else{if(m.find("body").length>0){m=m.find("body")}}m=m.html();e(m,j)},error:function(o,n,m){setModalContents('<p class="async-modal__error">'+m+"</p>",j)}})}})});function e(i,j){h.find("[data-modal-content]:first").empty().append(i);h.find("[data-modal-close]").off("click").click(function(k){k.preventDefault();g(j)});c.off("click").click(function(k){k.preventDefault();g(j)});f(j)}function f(m){c.css({display:"block",opacity:0});var j=h.outerHeight(),i=h.outerWidth(),l=a(document.body).height(),k={display:"block",opacity:0,"margin-left":-(i/2)+"px"};if(d.top===0){k.top="50%";k["margin-top"]=-(j/2)+"px"}else{k.top=(d.top+j>=a(document.body).height()?10:d.top)+"px"}h.css(k);a(m).trigger({type:"modal-opening",modal:h[0],modalContents:h.find("[data-modal-content]:first")[0],closeModal:function(){g(m)}});c.animate({opacity:d.overlay.opacity},d.fadeDuration);h.animate({opacity:1},d.fadeDuration)}function g(i){c.animate({opacity:0},d.fadeDuration);h.animate({opacity:0},d.fadeDuration,function(){c.css("display","none");h.css("display","none");a(i).trigger("modal-closed")})}}})})(jQuery);